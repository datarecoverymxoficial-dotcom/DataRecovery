<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Recuperación en Celulares y Tablets — Data Recovery</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* === Popup bonito === */
    .popup-overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.5);
      display: none; align-items: center; justify-content: center;
      z-index: 999;
    }
    .popup {
      background: #fff; border-radius: 12px; padding: 2em; text-align: center;
      max-width: 350px; width: 90%; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      animation: popupIn 0.3s ease;
    }
    .popup h2 { color: #2563eb; margin-bottom: 0.5em; }
    .popup p { color: #333; margin-bottom: 1em; }
    .popup button {
      background: #2563eb; color: #fff; border: 0; padding: .6em 1.2em;
      border-radius: 6px; cursor: pointer; font-size: 1em;
    }
    .popup button:hover { background:#1e4fd1; }
    @keyframes popupIn { from { transform: scale(.8); opacity:0; } to { transform: scale(1); opacity:1; } }
  </style>
</head>
<body>
<header class="site-header">
  <div class="container nav">
    <a class="brand" href="index.html">
      <img src="imagenes/logo.png" alt="" width="28" height="28">
      <span>Data Recovery</span>
    </a>
    <button class="nav-toggle" aria-expanded="false" aria-controls="menu">☰</button>
    <nav id="menu" class="menu" aria-label="Principal">
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="servicios.html" aria-current="page">Servicios</a></li>
        <li><a href="acerca.html">Acerca</a></li>
        <li><a href="contacto.html">Contacto</a></li>
      </ul>
    </nav>
  </div>
</header>

<main id="contenido">
  <section class="section">
    <div class="container">
      <h1>Recuperación en Celulares y Tablets</h1>
      <p class="lead" style="color:#1f2937;max-width:70ch">
        Rescatamos fotos, videos y documentos importantes desde tu dispositivo móvil, con rapidez y cuidado para que recuperes tus recuerdos y tu trabajo.
      </p>

      <div class="service-intro" style="margin-top:16px;">
        <article class="card">
          <h3>Costos orientativos</h3>
          <ul class="list">
            <li>Diagnóstico: <strong>$0</strong> (gratuito)</li>
            <li>Casos lógicos (borrado/formato): <strong>$900–$1,800 MXN</strong></li>
            <li>Casos físicos (fallo de hardware): <strong>$2,500–$6,000 MXN</strong></li>
          </ul>
          <p class="help">Los precios pueden variar según el modelo, la marca y el tipo de daño.</p>
        </article>
        <figure class="service-illustration">
          <img src="imagenes/serv_rec_m.png" alt="Recuperación de datos" loading="lazy" decoding="async">
        </figure>
      </div>

      <h3 style="margin-top:20px;">Solicita tu presupuesto</h3>
      <!-- Form conectado a Formspree -->
      <form
        class="form"
        id="form-presu"
        action="https://formspree.io/f/mnngoppk"
        method="POST"
      >
        <div class="grid-2">
          <label><span>Nombre</span><input name="nombre" required></label>
          <label><span>Correo</span><input name="correo" type="email" required></label>
        </div>
        <div class="grid-2">
          <label>
            <span>Tipo de daño</span>
            <select name="tipo" required>
              <option value="logico">Borrado/Formato (daño lógico)</option>
              <option value="fisico">Fallo de hardware (daño físico)</option>
            </select>
          </label>
          <label>
            <span>Capacidad aprox.</span>
            <select name="capacidad" required>
              <option value="menor64">≤64 GB</option>
              <option value="64a256">64–256 GB</option>
              <option value="mayor256">≥256 GB</option>
            </select>
          </label>
        </div>
        <label>
          <span>Descripción del problema</span>
          <textarea name="detalle" rows="4" placeholder="Qué pasó, qué intentaste, hace cuánto…"></textarea>
        </label>
        <p class="help" id="estimado-ayuda">Estimado: —</p>
        <button class="btn primary" type="submit">Solicitar presupuesto</button>
      </form>
    </div>
    <div class="btn-center" style="margin-top:22px;">
      <a href="servicios.html" class="btn diagnostico">volver</a>
    </div>
  </section>
</main>

<footer class="site-footer">
  <div class="container footer-grid">
    <div><strong>Data Recovery</strong><p>© <span id="year"></span></p></div>
    <nav aria-label="Secundario">
      <a href="index.html">Inicio</a>
      <a href="servicios.html" aria-current="page">Servicios</a>
      <a href="acerca.html">Acerca</a>
      <a href="contacto.html">Contacto</a>
    </nav>
  </div>
</footer>

<!-- Popup -->
<div class="popup-overlay" id="popup-overlay">
  <div class="popup">
    <h2>✅ ¡Solicitud enviada!</h2>
    <p>Gracias por contactarnos. Te enviaremos tu presupuesto pronto.</p>
    <button id="close-popup">Cerrar</button>
  </div>
</div>

<script>
  // Menú móvil
  const toggle = document.querySelector('.nav-toggle');
  const menu = document.getElementById('menu');
  toggle?.addEventListener('click', () => {
    const e = toggle.getAttribute('aria-expanded') === 'true';
    toggle.setAttribute('aria-expanded', String(!e));
    menu.classList.toggle('open');
  });
  document.getElementById('year').textContent = new Date().getFullYear();

  // Estimador (rangos móviles)
  const form = document.getElementById('form-presu');
  const ayuda = document.getElementById('estimado-ayuda');
  const rangos = {
    logico: { menor64: [900, 1200], "64a256": [1100, 1500], mayor256: [1300, 1800] },
    fisico: { menor64: [2500, 3500], "64a256": [3000, 4500], mayor256: [4000, 6000] }
  };
  function calc() {
    const f = new FormData(form);
    const tipo = f.get('tipo'), cap = f.get('capacidad');
    if (rangos[tipo] && rangos[tipo][cap]) {
      const [min, max] = rangos[tipo][cap];
      ayuda.textContent = `Estimado: $${min.toLocaleString()}–$${max.toLocaleString()} MXN (orientativo)`;
    }
  }
  form?.addEventListener('change', calc);

  // Envío real a Formspree + popup
  const popupOverlay = document.getElementById('popup-overlay');
  const closePopup = document.getElementById('close-popup');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    try {
      const response = await fetch(form.action, {
        method: form.method,
        body: formData,
        headers: { 'Accept': 'application/json' }
      });
      if (response.ok) {
        popupOverlay.style.display = 'flex';
        form.reset();
        ayuda.textContent = 'Estimado: —';
      } else {
        alert("❌ Hubo un error al enviar el mensaje. Inténtalo de nuevo.");
      }
    } catch (err) {
      alert("❌ No se pudo conectar. Revisa tu conexión e intenta de nuevo.");
    }
  });

  // Cerrar popup
  closePopup.addEventListener('click', () => popupOverlay.style.display = 'none');
  popupOverlay.addEventListener('click', e => { if (e.target === popupOverlay) popupOverlay.style.display = 'none'; });
</script>
</body>
</html>
